/*!
 * @copyright Copyright &copy; Anton Kazarinov 2018
 *
 * Author: Anton Kazarinov
 */
$(function(){$(document).on("click",'a[data-toggle="ajax-modal"]',function(t){t.preventDefault();var a=$(this),e=$(a.attr("data-target")),o=a.attr("href"),d=a.attr("data-title")||"",n=e.find(".modal-header").find(".modal-title"),l=e.modal("show").find(".modal-body").empty(),i=a.attr("data-gridview")||!1;0===n.length?$("<h4>"+d+"</h4>").addClass("modal-title").appendTo(e.find(".modal-header")):n.text(d);var s={url:o,beforeSend:function(){l.addClass("loading")},success:function(t){l.html(t)},complete:function(){l.removeClass("loading")}};!1!==i&&(s.data={ids:$(i).yiiGridView("getSelectedRows")}),o&&$.ajax(s)}),$(document).on("submit","form[data-ajax]",function(t){t.preventDefault();var a=new FormData(this),e=$(this),o=e.closest(".modal-body"),d=e.closest(".modal").attr("id");$.ajax({url:e.attr("action"),type:"POST",processData:!1,contentType:!1,data:a,beforeSend:function(){o.html(""),o.addClass("loading")},success:function(t){$("#"+d).trigger("submit.success.bs.modal",[t]),o.html(t)},complete:function(){o.removeClass("loading")}})})});